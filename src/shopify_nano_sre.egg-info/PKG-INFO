Metadata-Version: 2.4
Name: shopify-nano-sre
Version: 0.1.0
Summary: The open-source AI engineer that monitors your Shopify store 24/7
Author: Shopify Nano-SRE Contributors
License: MIT
Keywords: shopify,monitoring,ai,playwright,sre
Classifier: Development Status :: 3 - Alpha
Classifier: Environment :: Console
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Natural Language :: English
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Topic :: Software Development :: Testing
Classifier: Topic :: Internet :: WWW/HTTP
Requires-Python: >=3.11
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: playwright>=1.40.0
Requires-Dist: litellm>=1.0.0
Requires-Dist: rich>=13.0.0
Requires-Dist: sqlite-utils>=3.30.0
Requires-Dist: pydantic>=2.0.0
Requires-Dist: pydantic-settings>=2.0.0
Requires-Dist: click>=8.0.0
Requires-Dist: httpx>=0.25.0
Provides-Extra: dev
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Requires-Dist: pytest-cov>=4.1.0; extra == "dev"
Requires-Dist: pytest-playwright>=0.4.0; extra == "dev"
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: ruff>=0.1.0; extra == "dev"
Requires-Dist: mypy>=1.0.0; extra == "dev"
Requires-Dist: pre-commit>=3.0.0; extra == "dev"
Dynamic: license-file

# Shopify Nano-SRE

> The open-source AI engineer that monitors your Shopify store 24/7.

[![Python 3.11+](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![Playwright](https://img.shields.io/badge/powered%20by-Playwright-green.svg)](https://playwright.dev/)
[![MIT License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![CI Status](https://github.com/Shop-Integrations/shopify-nano-sre/actions/workflows/ci.yml/badge.svg)](https://github.com/Shop-Integrations/shopify-nano-sre/actions)

## Monitoring Comparison

| Feature                           | Pingdom | Datadog           | Shopify Nano-SRE |
| --------------------------------- | ------- | ----------------- | ---------------- |
| HTTP Uptime                       | âœ…      | âœ…                | âœ…               |
| Synthetic User Journey            | âŒ      | âš ï¸ (manual)       | âœ…               |
| Shopify Awareness                 | âŒ      | âš ï¸                | âœ…               |
| Checkout Audit                    | âŒ      | âš ï¸ (manual)       | âœ…               |
| Analytics Pixel Validation        | âŒ      | âŒ                | âœ…               |
| LLM-Powered Diagnosis             | âŒ      | âŒ                | âœ…               |
| Mobile-First Monitoring           | âš ï¸      | âš ï¸                | âœ…               |
| Open Source                       | âŒ      | âŒ                | âœ…               |
| Self-Hosted                       | âŒ      | âŒ                | âœ…               |
| Setup Time                        | 5 min   | Days or weeks     | 5 min            |
| Cost per month                    | $10-50  | $500+ (enterprise) | Free (+ LLM API) |

## Features

- ğŸ¤– **Agentic Diagnostics**: LLMs analyze failures and propose next steps
- ğŸ­ **Synthetic Shopper**: Real user journeys through product, cart, checkout
- ğŸ§ª **Pixel Auditor**: Verifies checkout events and conversion tracking
- ğŸ§¿ **Visual Layout Sentinel**: Detects layout drift after app/theme changes
- ğŸ©º **Shopify Doctor**: Uses the Shopify Dev MCP to explain API errors
- ğŸ“Š **SQLite Baselines**: Tracks performance metrics locally
- ğŸ”’ **Local-First + BYOK**: Run on your machine, bring your own LLM key
- ğŸ“± **Mobile-First**: iPhone 14 Pro viewport included by default
- ğŸ³ **Docker Ready**: Containerized deployment supported

## About

Nano-SRE is a lightweight, AI-powered Site Reliability Engineering (SRE) tool designed specifically for Shopify stores. It continuously monitors your storefront, product pages, add-to-cart flows, and checkout using synthetic monitoring with Playwright, then employs LLM-driven diagnostics to detect and alert you to issues before customers see them.

### The Reliability Gaps We Target

- **Silent Failures**: App embed conflicts that break add-to-cart without server errors
- **Checkout Extensibility Migrations**: Pixels and conversion events that stop firing
- **Headless Fragility**: API rate limits, hydration mismatches, stale data
- **Manual QA Limits**: Continuous synthetic shoppers instead of human click-throughs

### Why Nano-SRE?

As Shopify transitions to [Checkout Extensibility](https://shopify.dev/docs/custom-storefronts/checkout/checkout-extensibility), store operations become more complex. Custom checkout flows, third-party payment processors, and pixel-heavy analytics stacks introduce new failure modes that traditional uptime monitoring cannot catch. Nano-SRE fills that gap by:

- **Synthetic Shopper**: Walks through your product and checkout flow autonomously
- **Pixel Auditor**: Validates critical analytics pixels (Facebook, GA, TikTok) are firing
- **Smart Diagnosis**: Uses LLMs to analyze failures and suggest remediation
- **Mobile-First**: Tests on iPhone 14 Pro viewport by default
- **Local-First**: Runs locally with BYOK, keeping store data private

## Quick Start

### Installation

```bash
pip install shopify-nano-sre
```

Or clone and install in development mode:

```bash
git clone https://github.com/Shop-Integrations/shopify-nano-sre.git
cd shopify-nano-sre
pip install -e ".[dev]"
```

### Configuration

1. Copy `.env.example` to `.env`
2. Fill in required fields:
   - `STORE_URL`: Your Shopify store URL (e.g., `https://mystore.myshopify.com`)
   - `LLM_API_KEY`: OpenAI or Anthropic API key
   - `LLM_MODEL`: Model to use (e.g., `gpt-4`, `claude-3-sonnet`)

### Run Your First Check

```bash
nano-sre watch --interval 30
```

Or trigger a manual check:

```bash
nano-sre check
```

Or run a one-off audit:

```bash
nano-sre audit --url https://mystore.myshopify.com
```

## How It Works

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Trigger  â”‚  (Interval or Webhook)
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Observe     â”‚  Skill 1: Synthetic Shopper
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  Skill 2: Pixel Auditor
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  ... (more skills)
â”‚  Diagnose    â”‚  LLM: Analyze failures + suggest actions
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Act         â”‚  Send alert, record incident, update baseline
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Technology Stack

| Component        | Choice                     | Notes |
| --------------- | -------------------------- | ----- |
| Agent Core      | Nanobot-inspired Python    | Lightweight and auditable |
| Browser Engine  | Playwright                 | Handles hydration and pixels |
| Intelligence    | LiteLLM                    | OpenAI, Anthropic, local models |
| Knowledge Base  | Shopify Dev MCP            | Live API docs and errors |
| State           | SQLite                     | Local baselines and incidents |

### Skill: Synthetic Shopper

Automatically:

1. Navigate to your store
2. Click first product link
3. Add to cart
4. Proceed to checkout
5. Capture performance metrics (LCP, load time)
6. Report PASS/WARN/FAIL

### Skill: Pixel Auditor

Tracks pixel firing:

- **Facebook Pixel**: `facebook.com/tr`
- **Google Analytics**: `google-analytics.com/collect`
- **TikTok Pixel**: `analytics.tiktok.com/v1/track`

### Skill: Visual Layout Sentinel

- Captures baseline screenshots for key templates
- Uses LLM vision to detect layout drift after app/theme changes

### Skill: Shopify Doctor

- Queries the Shopify Dev MCP for API and deprecation guidance
- Turns GraphQL errors into actionable fixes

## Deployment Options

- **Local CLI**: Run checks from your terminal or CI
- **GitHub Action**: Block deployments when critical checks fail
- **Self-Hosted Worker**: Run scheduled checks for multiple stores

## Roadmap

- **Phase 1**: CLI + GitHub Action (open-source, BYOK)
- **Phase 2**: Managed worker service for agencies and merchants
- **Phase 3**: Plugin system for app-specific health checks

## Development

### Setup

```bash
pip install -e ".[dev]"
pre-commit install
```

### Run Tests

```bash
pytest tests/ -v
```

### Code Quality

```bash
ruff check src/
mypy src/ --config-file=mypy.ini
```

## API Reference

_(Placeholder: Full API documentation coming soon)_

## Deployment

### Docker

```bash
docker build -t shopify-nano-sre .
docker run -e STORE_URL=... -e LLM_API_KEY=... shopify-nano-sre watch
```

### Kubernetes

A Helm chart is planned for future releases.

## Support & Contributing

- **Issue Tracker**: [GitHub Issues](https://github.com/Shop-Integrations/shopify-nano-sre/issues)
- **Discussions**: [GitHub Discussions](https://github.com/Shop-Integrations/shopify-nano-sre/discussions)
- **Contributing**: See [CONTRIBUTING.md](CONTRIBUTING.md) (placeholder)

## License

This project is licensed under the MIT License - see [LICENSE](LICENSE) for details.

## Security

Found a security vulnerability? Please report it via [SECURITY.md](SECURITY.md).

---

**Learn more** at [shopintegrations.com](https://shopintegrations.com)
